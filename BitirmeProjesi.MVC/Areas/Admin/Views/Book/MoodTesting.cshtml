
@model BitirmeProjesi.Entities.Dtos.BookQuestionDto
@{
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
}

<script src="~/vendor/jquery/jquery.min.js"></script>
<script src="~/vendor/bootstrap/js/bootstrap.min.js"></script>
<link href="~/css/MoodTest.css" rel="stylesheet" />


<div class="row">
    <div class="container text-center col-md-4 ">
        <div class="modal-dialog p-2">
            @foreach (var test in Model.BookQuestions)
            {
                <div class="modal-content" id="quiz2">
                    <div class="modal-header">
                        <h2 class="text-info"><span class="label label-warning text-info" id="question"></span>@test.QuestionText </h2>
                    </div>
                    <div class="modal-body">
                        <div class="quiz" id="quiz" data-toggle="buttons">
                            <label class=" btn btn-lg btn-primary btn-block"><span class="btn-label"></span> <input type="radio" name="q_answer" value="@test.OptionsOne">@test.OptionsOne</label>
                            <label class=" btn btn-lg btn-primary btn-block"><span class="btn-label"></span> <input type="radio" name="q_answer" value="@test.OptionsTwo">@test.OptionsTwo</label>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
    <div class="container text-center col-md-6 " id="SuggestionScreen">
        <div class="modal-dialog p-2">
            <div class="modal-content">
                <div class="modal-header ">
                    <h2 class="text-info"><span class="label label-warning text-info"></span>Senin İçin Önerilerimiz </h2>
                </div>
                <div class="modal-body">
                    <div class="card text-white bg-primary mb-3" style="max-width: 18rem;">
                        <a class="card-header bg-info text-dark" id="answer1Title"> </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



@section Scripts{
    <script type="text/javascript">
        $(function () {
            $('#SuggestionScreen').hide();
            $("label.btn").on('click', function () {
                var choice = $(this).find('input:radio').val();

                if (choice == "200 sayfa ve altı")
                    $.ajax({
                        type: "GET",
                        contentType: "application/json; charset=utf-8",
                        url: "./GetBookLessThanTwoHundredPage   ",
                        success: function (result) {
                            $('#SuggestionScreen').show();
                            const resultBook = jQuery.parseJSON(result);

                            if (resultBook.ResultStatus === 0) {
                                let answerResult = "";
                                $.each(resultBook.Books.$values,
                                    function (index, book) {
                                        answerResult += `
                                                                                             <div class="card-header bg-info"> ${book.Title}</div>


                                                                                            `;
                                    }
                                );
                                $('#answer1Title').replaceWith(answerResult);
                               
                                //$('#quiz').fadeOut();
                                //$('input:radio').prop('checked', false);
                                //setTimeout(function () {
                                //    window.location.reload();
                                //}, 30000);


                                //$('#quiz').show();


                            }

                        }
                    });

                else if (choice == "200 sayfadan daha fazla") {
                   
                    $.ajax({
                        type: "GET",
                        contentType: "application/json; charset=utf-8",
                        url: "./GetBookMoreThanTwoHundredPage",
                        success: function (result) {
                            $('#SuggestionScreen').show();
                            const resultBookLess = jQuery.parseJSON(result);

                            if (resultBookLess.ResultStatus === 0) {
                                let answerResultLess = "";
                                $('#answer1Title').html(" ");
                                $.each(resultBookLess.Books.$values,
                                    function (index, book) {
                                        answerResultLess += `
                                                                                        <div class="card-header bg-info"> ${book.Title}</div>

                                                                                        `;
                                    }
                                );
                                $('#answer1Title').replaceWith(answerResultLess);
                            }
                          
                        }
                    });
                }

                else if (choice == "Evet") {

                    $('#SuggestionScreen').hide();
                    $.ajax({
                        type: "GET",
                        contentType: "application/json; charset=utf-8",
                        url: "./GetBookClassical",
                        success: function (result) {
                            $('#SuggestionScreen').show();
                            const resultBookLess = jQuery.parseJSON(result);

                            if (resultBookLess.ResultStatus === 0) {
                                let answerResultLess = "";
                                $('#answer1Title').html(" ");
                                $.each(resultBookLess.Books.$values,
                                    function (index, book) {
                                        answerResultLess += `
                                                                                        <div class="card-header bg-info"> ${book.Title}</div>

                                                                                        `;
                                    }
                                );
                                $('#answer1Title').replaceWith(answerResultLess);
                            }
                        }
                    });
                }

                else if (choice == "Hayır") {

                    $('#SuggestionScreen').hide();
                    $.ajax({
                        type: "GET",
                        contentType: "application/json; charset=utf-8",
                        url: "./GetBookNonClassical",
                        success: function (result) {
                            $('#SuggestionScreen').show();
                            const resultBookLess = jQuery.parseJSON(result);

                            if (resultBookLess.ResultStatus === 0) {
                                let answerResultLess = "";
                                $('#answer1Title').html(" ");
                                $.each(resultBookLess.Books.$values,
                                    function (index, book) {
                                        answerResultLess += `
                                                                                        <div class="card-header bg-info"> ${book.Title}</div>

                                                                                        `;
                                    }
                                );
                                $('#answer1Title').replaceWith(answerResultLess);
                            }
                        }
                    });
                }


                else if (choice == "Evet eski tarihli kitaplar öncelikli tercihimdir") {

                    $('#SuggestionScreen').hide();
                    $.ajax({
                        type: "GET",
                        contentType: "application/json; charset=utf-8",
                        url: "./GetBookDateLess1990",
                        success: function (result) {
                            $('#SuggestionScreen').show();
                            const resultBookLess = jQuery.parseJSON(result);

                            if (resultBookLess.ResultStatus === 0) {
                                let answerResultLess = "";
                                $('#answer1Title').html(" ");
                                $.each(resultBookLess.Books.$values,
                                    function (index, book) {
                                        answerResultLess += `
                                                                                        <div class="card-header bg-info"> ${book.Title}</div>

                                                                                        `;
                                    }
                                );
                                $('#answer1Title').replaceWith(answerResultLess);
                            }
                        }
                    });
                }

                else if (choice == "Günümüze daha yakın tarihli kitapları tercih ederim") {

                    $('#SuggestionScreen').hide();
                    $.ajax({
                        type: "GET",
                        contentType: "application/json; charset=utf-8",
                        url: "./GetBookDateThan1990",
                        success: function (result) {
                            $('#SuggestionScreen').show();
                            const resultBookLess = jQuery.parseJSON(result);

                            if (resultBookLess.ResultStatus === 0) {
                                let answerResultLess = "";
                                $('#answer1Title').html(" ");
                                $.each(resultBookLess.Books.$values,
                                    function (index, book) {
                                        answerResultLess += `
                                                                                        <div class="card-header bg-info"> ${book.Title}</div>

                                                                                        `;
                                    }
                                );
                                $('#answer1Title').replaceWith(answerResultLess);
                            }
                        }
                    });
                }
            });
        });
    </script>
}
